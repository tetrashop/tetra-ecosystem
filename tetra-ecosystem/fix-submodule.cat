#!/bin/bash
echo "ðŸ”§ ØªØ´Ø®ÛŒØµ Ùˆ ØªØ¹Ù…ÛŒØ± Ø®ÙˆØ¯Ú©Ø§Ø± submodule..."

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¬ÙˆØ¯ Ù¾ÙˆØ´Ù‡ submodule
if [ ! -d "modules/3d-converter" ]; then
    echo "âŒ Ù¾ÙˆØ´Ù‡ submodule ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯"
    exit 1
fi

# Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø­ØªÙˆØ§ÛŒ submodule
echo "ðŸ“ Ù…Ø­ØªÙˆØ§ÛŒ submodule:"
ls -la modules/3d-converter/ | head -10

# Ø§Ú¯Ø± Ø®Ø§Ù„ÛŒ Ø§Ø³Øª ÛŒØ§ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ù†Ø¯
if [ ! -f "modules/3d-converter/requirements.txt" ]; then
    echo "ðŸ“ Ø§ÛŒØ¬Ø§Ø¯ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ..."
    
    # Ø§ÛŒØ¬Ø§Ø¯ requirements.txt
    cat > modules/3d-converter/requirements.txt << 'END'
fastapi>=0.99.1
uvicorn[standard]>=0.38.0
python-multipart>=0.0.20
pillow>=10.0.1
numpy>=1.24.3
python-dateutil>=2.8.2
END

    # Ø§ÛŒØ¬Ø§Ø¯ Ø³Ø§Ø®ØªØ§Ø± Ù¾ÙˆØ´Ù‡â€ŒÙ‡Ø§
    mkdir -p modules/3d-converter/{app,converters,models,temp}
    
    echo "âœ… ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù¾Ø§ÛŒÙ‡ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù†Ø¯"
fi

# Ø¨Ø±Ø±Ø³ÛŒ Ù†Ù‡Ø§ÛŒÛŒ
echo "âœ… Ø¨Ø±Ø±Ø³ÛŒ Ù†Ù‡Ø§ÛŒÛŒ:"
find modules/3d-converter/ -type f -name "*.py" -o -name "*.txt" -o -name "*.json" 2>/dev/null
