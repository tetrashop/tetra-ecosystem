<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù†Ú¯Ø§Ø± Ú©ÙˆØ§Ù†ØªÙˆÙ… - Tetra Ecosystem</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        .design-hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 4rem 0;
            text-align: center;
            border-radius: 0 0 30px 30px;
        }
        .design-canvas {
            background: white;
            border: 3px solid #e9ecef;
            border-radius: 15px;
            height: 500px;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }
        .tool-btn {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .tool-btn.active {
            border: 3px solid #6366f1;
            background: #e0e7ff;
        }
        .color-palette {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 1rem 0;
        }
        .color-option {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        .color-option.active {
            border-color: #000;
            transform: scale(1.1);
        }
        .design-element {
            position: absolute;
            cursor: move;
            user-select: none;
        }
        .quantum-effect {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #ffeaa7);
            background-size: 400% 400%;
            animation: gradientShift 3s ease infinite;
        }
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
    </style>
</head>
<body class="bg-light">
    <nav class="navbar navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="tetra-ecosystem.html">
                <i class="bi bi-brush"></i>
                Ù†Ú¯Ø§Ø± Ú©ÙˆØ§Ù†ØªÙˆÙ…
            </a>
        </div>
    </nav>

    <!-- Ù‡Ø¯Ø± -->
    <div class="design-hero">
        <div class="container">
            <h1 class="display-4 mb-3">ğŸ¨ Ù†Ú¯Ø§Ø± Ú©ÙˆØ§Ù†ØªÙˆÙ…</h1>
            <p class="lead mb-4">Ø·Ø±Ø§Ø­ÛŒ Ú¯Ø±Ø§ÙÛŒÚ©ÛŒ Ø¨Ø§ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ Ùˆ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ</p>
            <div class="row">
                <div class="col-md-3">
                    <div class="h3">ÛµÛ°+</div>
                    <small>Ø§Ø¨Ø²Ø§Ø± Ø·Ø±Ø§Ø­ÛŒ</small>
                </div>
                <div class="col-md-3">
                    <div class="h3">Û±Û°Û°Û°+</div>
                    <small>Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ø¢Ù…Ø§Ø¯Ù‡</small>
                </div>
                <div class="col-md-3">
                    <div class="h3">Û´K</div>
                    <small>Ú©ÛŒÙÛŒØª Ø®Ø±ÙˆØ¬ÛŒ</small>
                </div>
                <div class="col-md-3">
                    <div class="h3">Û°.Û²s</div>
                    <small>Ø³Ø±Ø¹Øª Ù¾Ø±Ø¯Ø§Ø²Ø´</small>
                </div>
            </div>
        </div>
    </div>

    <div class="container py-5">
        <div class="row">
            <!-- Ù†ÙˆØ§Ø± Ø§Ø¨Ø²Ø§Ø± -->
            <div class="col-md-3">
                <div class="card shadow-sm mb-4">
                    <div class="card-header bg-white">
                        <h5 class="mb-0">ğŸ› ï¸ Ø§Ø¨Ø²Ø§Ø± Ø·Ø±Ø§Ø­ÛŒ</h5>
                    </div>
                    <div class="card-body">
                        <div class="row text-center">
                            <div class="col-4 mb-3">
                                <div class="tool-btn active" data-tool="select" onclick="selectTool('select')">
                                    <i class="bi bi-cursor"></i>
                                </div>
                                <small>Ø§Ù†ØªØ®Ø§Ø¨</small>
                            </div>
                            <div class="col-4 mb-3">
                                <div class="tool-btn" data-tool="rectangle" onclick="selectTool('rectangle')">
                                    <i class="bi bi-square"></i>
                                </div>
                                <small>Ù…Ø³ØªØ·ÛŒÙ„</small>
                            </div>
                            <div class="col-4 mb-3">
                                <div class="tool-btn" data-tool="circle" onclick="selectTool('circle')">
                                    <i class="bi bi-circle"></i>
                                </div>
                                <small>Ø¯Ø§ÛŒØ±Ù‡</small>
                            </div>
                            <div class="col-4 mb-3">
                                <div class="tool-btn" data-tool="text" onclick="selectTool('text')">
                                    <i class="bi bi-fonts"></i>
                                </div>
                                <small>Ù…ØªÙ†</small>
                            </div>
                            <div class="col-4 mb-3">
                                <div class="tool-btn" data-tool="line" onclick="selectTool('line')">
                                    <i class="bi bi-dash-lg"></i>
                                </div>
                                <small>Ø®Ø·</small>
                            </div>
                            <div class="col-4 mb-3">
                                <div class="tool-btn" data-tool="brush" onclick="selectTool('brush')">
                                    <i class="bi bi-brush"></i>
                                </div>
                                <small>Ù‚Ù„Ù…Ùˆ</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ù¾Ø§Ù„Øª Ø±Ù†Ú¯ -->
                <div class="card shadow-sm mb-4">
                    <div class="card-header bg-white">
                        <h5 class="mb-0">ğŸ¨ Ù¾Ø§Ù„Øª Ø±Ù†Ú¯</h5>
                    </div>
                    <div class="card-body">
                        <div class="color-palette">
                            <div class="color-option active" style="background: #ff6b6b;" data-color="#ff6b6b" onclick="selectColor(this)"></div>
                            <div class="color-option" style="background: #4ecdc4;" data-color="#4ecdc4" onclick="selectColor(this)"></div>
                            <div class="color-option" style="background: #45b7d1;" data-color="#45b7d1" onclick="selectColor(this)"></div>
                            <div class="color-option" style="background: #96ceb4;" data-color="#96ceb4" onclick="selectColor(this)"></div>
                            <div class="color-option" style="background: #ffeaa7;" data-color="#ffeaa7" onclick="selectColor(this)"></div>
                            <div class="color-option" style="background: #fab1a0;" data-color="#fab1a0" onclick="selectColor(this)"></div>
                            <div class="color-option" style="background: #a29bfe;" data-color="#a29bfe" onclick="selectColor(this)"></div>
                            <div class="color-option" style="background: #fd79a8;" data-color="#fd79a8" onclick="selectColor(this)"></div>
                            <div class="color-option" style="background: #6366f1;" data-color="#6366f1" onclick="selectColor(this)"></div>
                            <div class="color-option" style="background: #10b981;" data-color="#10b981" onclick="selectColor(this)"></div>
                        </div>
                        <input type="color" class="form-control mt-2" id="customColor" onchange="selectCustomColor(this.value)">
                    </div>
                </div>

                <!-- Ø¬Ù„ÙˆÙ‡â€ŒÙ‡Ø§ÛŒ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ -->
                <div class="card shadow-sm mb-4">
                    <div class="card-header bg-white">
                        <h5 class="mb-0">âš¡ Ø¬Ù„ÙˆÙ‡â€ŒÙ‡Ø§ÛŒ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ</h5>
                    </div>
                    <div class="card-body">
                        <button class="btn btn-outline-primary w-100 mb-2" onclick="applyEffect('gradient')">
                            Ú¯Ø±Ø§Ø¯ÛŒØ§Ù† Ù¾ÙˆÛŒØ§
                        </button>
                        <button class="btn btn-outline-success w-100 mb-2" onclick="applyEffect('particle')">
                            Ø°Ø±Ø§Øª Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ
                        </button>
                        <button class="btn btn-outline-warning w-100 mb-2" onclick="applyEffect('neon')">
                            Ø§Ø«Ø± Ù†Ø¦ÙˆÙ†
                        </button>
                        <button class="btn btn-outline-info w-100" onclick="applyEffect('hologram')">
                            Ù‡ÙˆÙ„ÙˆÚ¯Ø±Ø§Ù…
                        </button>
                    </div>
                </div>

                <!-- Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ø¢Ù…Ø§Ø¯Ù‡ -->
                <div class="card shadow-sm">
                    <div class="card-header bg-white">
                        <h5 class="mb-0">ğŸ“‹ Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ø¢Ù…Ø§Ø¯Ù‡</h5>
                    </div>
                    <div class="card-body">
                        <select class="form-select mb-3" id="templateSelect" onchange="loadTemplate(this.value)">
                            <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø§Ù„Ú¯Ùˆ</option>
                            <option value="social">Ù¾Ø³Øª Ø´Ø¨Ú©Ù‡ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ</option>
                            <option value="banner">Ø¨Ù†Ø± ØªØ¨Ù„ÛŒØºØ§ØªÛŒ</option>
                            <option value="logo">Ø·Ø±Ø§Ø­ÛŒ Ù„ÙˆÚ¯Ùˆ</option>
                            <option value="card">Ú©Ø§Ø±Øª ÙˆÛŒØ²ÛŒØª</option>
                            <option value="poster">Ù¾ÙˆØ³ØªØ±</option>
                        </select>
                        <button class="btn btn-success w-100" onclick="aiGenerateDesign()">
                            <i class="bi bi-magic"></i>
                            ØªÙˆÙ„ÛŒØ¯ Ù‡ÙˆØ´Ù…Ù†Ø¯
                        </button>
                    </div>
                </div>
            </div>

            <!-- Ú©Ø§Ù†ÙˆØ§Ø³ Ø·Ø±Ø§Ø­ÛŒ -->
            <div class="col-md-6">
                <div class="card shadow-sm">
                    <div class="card-header bg-white d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">ğŸ¨ Ú©Ø§Ù†ÙˆØ§Ø³ Ø·Ø±Ø§Ø­ÛŒ</h5>
                        <div>
                            <button class="btn btn-sm btn-outline-secondary me-2" onclick="clearCanvas()">
                                <i class="bi bi-trash"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-primary" onclick="exportDesign()">
                                <i class="bi bi-download"></i>
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="design-canvas" id="designCanvas">
                            <div class="text-center text-muted position-absolute top-50 start-50 translate-middle">
                                Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ Ø·Ø±Ø§Ø­ÛŒØŒ Ø§Ø² Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ø³Ù…Øª Ø±Ø§Ø³Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø·Ø±Ø§Ø­ÛŒ -->
                <div class="card shadow-sm mt-4">
                    <div class="card-header bg-white">
                        <h5 class="mb-0">ğŸ“š ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø·Ø±Ø§Ø­ÛŒâ€ŒÙ‡Ø§</h5>
                    </div>
                    <div class="card-body">
                        <div id="designHistory" class="row">
                            <!-- Ø·Ø±Ø§Ø­ÛŒâ€ŒÙ‡Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ -->
            <div class="col-md-3">
                <div class="card shadow-sm mb-4">
                    <div class="card-header bg-white">
                        <h5 class="mb-0">âš™ï¸ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">Ø´ÙØ§ÙÛŒØª</label>
                            <input type="range" class="form-range" id="opacityControl" min="0" max="1" step="0.1" value="1" onchange="updateOpacity(this.value)">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Ø¶Ø®Ø§Ù…Øª Ø®Ø·</label>
                            <input type="range" class="form-range" id="thicknessControl" min="1" max="20" value="3" onchange="updateThickness(this.value)">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Ø³Ø§ÛŒØ² ÙÙˆÙ†Øª</label>
                            <input type="range" class="form-range" id="fontSizeControl" min="12" max="72" value="24" onchange="updateFontSize(this.value)">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Ú†Ø±Ø®Ø´</label>
                            <input type="range" class="form-range" id="rotationControl" min="0" max="360" value="0" onchange="updateRotation(this.value)">
                        </div>
                    </div>
                </div>

                <!-- Ù„Ø§ÛŒÙ‡â€ŒÙ‡Ø§ -->
                <div class="card shadow-sm mb-4">
                    <div class="card-header bg-white">
                        <h5 class="mb-0">ğŸ“„ Ù…Ø¯ÛŒØ±ÛŒØª Ù„Ø§ÛŒÙ‡â€ŒÙ‡Ø§</h5>
                    </div>
                    <div class="card-body">
                        <div id="layerList">
                            <div class="alert alert-info text-center">
                                Ù„Ø§ÛŒÙ‡â€ŒØ§ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯
                            </div>
                        </div>
                        <button class="btn btn-outline-primary w-100 mt-2" onclick="addNewLayer()">
                            <i class="bi bi-plus-circle"></i>
                            Ø§ÙØ²ÙˆØ¯Ù† Ù„Ø§ÛŒÙ‡ Ø¬Ø¯ÛŒØ¯
                        </button>
                    </div>
                </div>

                <!-- Ø®Ø±ÙˆØ¬ÛŒ -->
                <div class="card shadow-sm">
                    <div class="card-header bg-white">
                        <h5 class="mb-0">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ø®Ø±ÙˆØ¬ÛŒ</h5>
                    </div>
                    <div class="card-body">
                        <select class="form-select mb-3" id="exportFormat">
                            <option value="png">PNG (Ø¨Ø§ Ú©ÛŒÙÛŒØª)</option>
                            <option value="jpg">JPG (ÙØ´Ø±Ø¯Ù‡)</option>
                            <option value="svg">SVG (Ø¨Ø±Ø¯Ø§Ø±ÛŒ)</option>
                            <option value="pdf">PDF (Ú†Ø§Ù¾)</option>
                        </select>
                        <button class="btn btn-success w-100 mb-2" onclick="saveDesign()">
                            <i class="bi bi-cloud-arrow-up"></i>
                            Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± Ø§Ø¨Ø±
                        </button>
                        <button class="btn btn-primary w-100" onclick="exportDesign()">
                            <i class="bi bi-download"></i>
                            Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø·Ø±Ø§Ø­ÛŒ
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="data-manager.js"></script>
    <script>
        let currentTool = 'select';
        let currentColor = '#ff6b6b';
        let designElements = [];
        let layers = [];
        let currentLayer = 0;

        function selectTool(tool) {
            currentTool = tool;
            
            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ø§Ù„ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§
            document.querySelectorAll('.tool-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-tool="${tool}"]`).classList.add('active');
        }

        function selectColor(element) {
            currentColor = element.dataset.color;
            
            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ø§Ù„ Ø±Ù†Ú¯â€ŒÙ‡Ø§
            document.querySelectorAll('.color-option').forEach(opt => {
                opt.classList.remove('active');
            });
            element.classList.add('active');
        }

        function selectCustomColor(color) {
            currentColor = color;
        }

        function applyEffect(effect) {
            const canvas = document.getElementById('designCanvas');
            
            switch(effect) {
                case 'gradient':
                    canvas.classList.add('quantum-effect');
                    break;
                case 'particle':
                    alert('Ø§Ø«Ø± Ø°Ø±Ø§Øª Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯!');
                    break;
                case 'neon':
                    alert('Ø§Ø«Ø± Ù†Ø¦ÙˆÙ† Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯!');
                    break;
                case 'hologram':
                    alert('Ø§Ø«Ø± Ù‡ÙˆÙ„ÙˆÚ¯Ø±Ø§Ù… Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯!');
                    break;
            }
        }

        function loadTemplate(template) {
            const canvas = document.getElementById('designCanvas');
            
            const templates = {
                social: {
                    title: 'Ø§Ù„Ú¯Ùˆ Ù¾Ø³Øª Ø´Ø¨Ú©Ù‡ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ',
                    elements: [
                        {type: 'rectangle', x: 50, y: 50, width: 300, height: 300, color: '#6366f1'},
                        {type: 'text', x: 100, y: 150, text: 'Ù¾Ø³Øª Ø§ÛŒÙ†Ø³ØªØ§Ú¯Ø±Ø§Ù…', color: '#ffffff', size: 24}
                    ]
                },
                banner: {
                    title: 'Ø§Ù„Ú¯Ùˆ Ø¨Ù†Ø± ØªØ¨Ù„ÛŒØºØ§ØªÛŒ', 
                    elements: [
                        {type: 'rectangle', x: 20, y: 20, width: 360, height: 100, color: '#10b981'},
                        {type: 'text', x: 100, y: 60, text: 'ØªØ®ÙÛŒÙ ÙˆÛŒÚ˜Ù‡!', color: '#ffffff', size: 28}
                    ]
                },
                logo: {
                    title: 'Ø§Ù„Ú¯Ùˆ Ø·Ø±Ø§Ø­ÛŒ Ù„ÙˆÚ¯Ùˆ',
                    elements: [
                        {type: 'circle', x: 150, y: 150, radius: 80, color: '#f59e0b'},
                        {type: 'text', x: 130, y: 160, text: 'Logo', color: '#ffffff', size: 20}
                    ]
                }
            };

            if (templates[template]) {
                canvas.innerHTML = '';
                alert(`Ø§Ù„Ú¯ÙˆÛŒ "${templates[template].title}" Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯!`);
                
                // Ø¯Ø± Ù†Ø³Ø®Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ Ø§Ù„Ù…Ø§Ù†â€ŒÙ‡Ø§ Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯
                designElements = templates[template].elements;
                updateLayerList();
            }
        }

        function aiGenerateDesign() {
            const prompt = prompt('Ù…ÙˆØ¶ÙˆØ¹ Ø·Ø±Ø§Ø­ÛŒ Ø®ÙˆØ¯ Ø±Ø§ ØªÙˆØµÛŒÙ Ú©Ù†ÛŒØ¯:');
            if (prompt) {
                alert(`Ø¯Ø± Ø­Ø§Ù„ ØªÙˆÙ„ÛŒØ¯ Ø·Ø±Ø§Ø­ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¨Ø±Ø§ÛŒ: "${prompt}"\n\nÙ„Ø·ÙØ§Ù‹ Ú†Ù†Ø¯ Ø«Ø§Ù†ÛŒÙ‡ Ù…Ù†ØªØ¸Ø± Ø¨Ù…Ø§Ù†ÛŒØ¯...`);
                
                setTimeout(() => {
                    // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ ØªÙˆÙ„ÛŒØ¯ Ø·Ø±Ø§Ø­ÛŒ
                    const canvas = document.getElementById('designCanvas');
                    canvas.innerHTML = `
                        <div class="design-element" style="left: 100px; top: 100px; width: 200px; height: 200px; background: ${currentColor}; border-radius: 15px;"></div>
                        <div class="design-element" style="left: 150px; top: 150px; color: white; font-size: 24px; font-weight: bold;">${prompt}</div>
                    `;
                    
                    alert('âœ… Ø·Ø±Ø§Ø­ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯!');
                    
                    // Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± ØªØ§Ø±ÛŒØ®Ú†Ù‡
                    saveToHistory(prompt);
                }, 3000);
            }
        }

        function addNewLayer() {
            layers.push({
                id: Date.now(),
                name: `Ù„Ø§ÛŒÙ‡ ${layers.length + 1}`,
                visible: true,
                locked: false
            });
            updateLayerList();
        }

        function updateLayerList() {
            const layerList = document.getElementById('layerList');
            
            if (layers.length === 0) {
                layerList.innerHTML = '<div class="alert alert-info text-center">Ù„Ø§ÛŒÙ‡â€ŒØ§ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</div>';
                return;
            }

            layerList.innerHTML = layers.map(layer => `
                <div class="d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                    <div>
                        <i class="bi bi-circle-fill text-success me-2"></i>
                        ${layer.name}
                    </div>
                    <div>
                        <button class="btn btn-sm btn-outline-secondary" onclick="toggleLayer(${layer.id})">
                            <i class="bi bi-eye"></i>
                        </button>
                        <button class="btn btn-sm btn-outline-danger" onclick="deleteLayer(${layer.id})">
                            <i class="bi bi-trash"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function toggleLayer(layerId) {
            const layer = layers.find(l => l.id === layerId);
            if (layer) {
                layer.visible = !layer.visible;
                updateLayerList();
            }
        }

        function deleteLayer(layerId) {
            layers = layers.filter(l => l.id !== layerId);
            updateLayerList();
        }

        function clearCanvas() {
            if (confirm('Ø¢ÛŒØ§ Ø§Ø² Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ú©Ù„ Ø·Ø±Ø§Ø­ÛŒ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ')) {
                document.getElementById('designCanvas').innerHTML = 
                    '<div class="text-center text-muted position-absolute top-50 start-50 translate-middle">Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ Ø·Ø±Ø§Ø­ÛŒØŒ Ø§Ø² Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ø³Ù…Øª Ø±Ø§Ø³Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</div>';
                designElements = [];
                layers = [];
                updateLayerList();
            }
        }

        function saveDesign() {
            const designName = prompt('Ù†Ø§Ù…ÛŒ Ø¨Ø±Ø§ÛŒ Ø·Ø±Ø§Ø­ÛŒ Ø®ÙˆØ¯ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:');
            if (designName) {
                alert(`Ø·Ø±Ø§Ø­ÛŒ "${designName}" Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¯Ø± Ø§Ø¨Ø± Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯!`);
                
                if (window.tetraData) {
                    tetraData.create('designProjects', {
                        name: designName,
                        timestamp: new Date().toLocaleString('fa-IR'),
                        elements: designElements.length,
                        status: 'Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡'
                    });
                }
            }
        }

        function exportDesign() {
            const format = document.getElementById('exportFormat').value;
            alert(`Ø·Ø±Ø§Ø­ÛŒ Ø´Ù…Ø§ Ø¯Ø± Ù‚Ø§Ù„Ø¨ ${format.toUpperCase()} Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø§Ø³Øª...`);
            
            // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ù†Ù„ÙˆØ¯
            setTimeout(() => {
                alert('âœ… Ø·Ø±Ø§Ø­ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø´Ø¯!');
            }, 2000);
        }

        function saveToHistory(prompt) {
            const history = JSON.parse(localStorage.getItem('designHistory') || '[]');
            history.unshift({
                prompt: prompt,
                timestamp: new Date().toLocaleString('fa-IR'),
                elements: designElements.length
            });
            
            if (history.length > 6) history.pop();
            localStorage.setItem('designHistory', JSON.stringify(history));
            updateDesignHistory();
        }

        function updateDesignHistory() {
            const history = JSON.parse(localStorage.getItem('designHistory') || '[]');
            const historyDiv = document.getElementById('designHistory');
            
            if (history.length === 0) {
                historyDiv.innerHTML = '<div class="col-12 text-center text-muted">ØªØ§Ø±ÛŒØ®Ú†Ù‡â€ŒØ§ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª</div>';
                return;
            }

            historyDiv.innerHTML = history.map(item => `
                <div class="col-md-6 mb-3">
                    <div class="card">
                        <div class="card-body">
                            <h6>${item.prompt.substring(0, 20)}...</h6>
                            <small class="text-muted">${item.timestamp}</small>
                            <br>
                            <small>${item.elements} Ø§Ù„Ù…Ø§Ù†</small>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // ØªÙˆØ§Ø¨Ø¹ Ú©Ù†ØªØ±Ù„ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§
        function updateOpacity(value) {
            console.log('Ø´ÙØ§ÙÛŒØª Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯:', value);
        }

        function updateThickness(value) {
            console.log('Ø¶Ø®Ø§Ù…Øª Ø®Ø· Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯:', value);
        }

        function updateFontSize(value) {
            console.log('Ø³Ø§ÛŒØ² ÙÙˆÙ†Øª Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯:', value);
        }

        function updateRotation(value) {
            console.log('Ú†Ø±Ø®Ø´ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯:', value);
        }

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        document.addEventListener('DOMContentLoaded', function() {
            updateDesignHistory();
            updateLayerList();
        });
    </script>
</body>
</html>
